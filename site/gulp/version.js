var gulp = require('gulp');
var git = require('git-rev');
var fs = require('fs');

// update version
gulp.task('update-version', function(){
  git.long(function(hash){
    var fileContent = "";
    fileContent +=  ";;; GENERATED BY GULP, DO NOT EDIT\n";
    fileContent += "(ns app.views.version)\n";
    fileContent += "(def version \"" + hash + "\")\n";

    var configFile = 'src/app/views/version.clj';
    fs.writeFileSync(configFile, fileContent);
  });
});
